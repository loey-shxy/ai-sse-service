import{_ as A}from"./overlay-up8p_Ekf.js";import{j as B,k as F}from"./index-F5iSPcyE.js";/* empty css             *//* empty css               *//* empty css                  *//* empty css              */import{d as K,r as E,a as I,w as P,o as f,c as v,b as d,n as S,u as b,q as M,e,f as r,g as R,y,h as T,i as j,j as G,E as O,T as Z,k as x,l as z,Z as L,_ as H,m as J,p as Q,N as W,x as X,A as g}from"./index--bHfDvFW.js";import{g as Y}from"./dict--24UHE2E.js";import"./constant-7OBoqEYa.js";const k="/image/edit.png",ee={class:"dialog-footer"},se=K({__name:"edit-form",props:{visible:{type:Boolean,default:!1},title:{default:"Edit Profile"},userInfo:{default:()=>({})},editKeys:{default:()=>[]}},emits:["update:visible","refresh"],setup(C,{emit:a}){const{appContext:{config:{globalProperties:V}}}=G(),l=C,p=a,_=E(!1),n=E(),s=I({}),N=I({account:[{required:!0,message:"Please write your email",trigger:"blur"}],gender:[{required:!0,message:"Please select your gender",trigger:"blur"}],nickName:[{required:!0,message:"Please write your nickname",trigger:"blur"}],phone:[{required:!0,message:"Please write your phone number",trigger:"blur"}],oldPassword:[{required:!0,message:"Please write your old password",trigger:"blur"}],password:[{required:!0,message:"Please write your new password",trigger:"blur"}]});P(()=>_.value,t=>{n.value&&n.value.resetFields(),p("update:visible",t)});const h=async()=>{n.value&&await n.value.validate(async t=>{if(t){const{msg:o,code:u}=await B(s);u===1e3?(p("refresh"),w()):O({type:"error",message:o})}})};P(()=>l.visible,()=>{_.value=l.visible}),P(()=>l.userInfo,t=>{Z(()=>{s.id=t.id,s.account=t.account,s.gender=t.gender,s.nickName=t.nickName,s.phone=t.phone})},{immediate:!0,deep:!0});const w=()=>{_.value=!1};return(t,o)=>{const u=x,c=z,m=L,U=H,$=J,D=Q,q=M;return f(),v(q,{modelValue:_.value,"onUpdate:modelValue":o[8]||(o[8]=i=>_.value=i),class:S(["custom-dialog",b(V).$isMobile?"mobile-contact-us__dialog edit":"pc-contact-us__dialog edit"]),title:t.title,"before-close":w,"append-to-body":""},{footer:d(()=>[e("span",ee,[r(D,{type:"primary",onClick:o[7]||(o[7]=i=>h())},{default:d(()=>[R("Save")]),_:1})])]),default:d(()=>[r($,{ref_key:"ruleFormRef",ref:n,model:s,rules:N,"hide-required-asterisk":"",onKeyup:o[6]||(o[6]=T(j(i=>h(),["prevent"]),["enter"]))},{default:d(()=>[t.editKeys.includes("account")?(f(),v(c,{key:0,prop:"account"},{default:d(()=>[r(u,{modelValue:s.account,"onUpdate:modelValue":o[0]||(o[0]=i=>s.account=i),placeholder:"Email"},null,8,["modelValue"])]),_:1})):y("",!0),t.editKeys.includes("nickName")?(f(),v(c,{key:1,prop:"nickName"},{default:d(()=>[r(u,{modelValue:s.nickName,"onUpdate:modelValue":o[1]||(o[1]=i=>s.nickName=i),placeholder:"Nickname"},null,8,["modelValue"])]),_:1})):y("",!0),t.editKeys.includes("gender")?(f(),v(c,{key:2,prop:"gender"},{default:d(()=>[r(U,{modelValue:s.gender,"onUpdate:modelValue":o[2]||(o[2]=i=>s.gender=i)},{default:d(()=>[r(m,{value:1,label:"Male"}),r(m,{value:2,label:"Female"})]),_:1},8,["modelValue"])]),_:1})):y("",!0),t.editKeys.includes("phone")?(f(),v(c,{key:3,prop:"phone"},{default:d(()=>[r(u,{modelValue:s.phone,"onUpdate:modelValue":o[3]||(o[3]=i=>s.phone=i),placeholder:"Phone Number"},null,8,["modelValue"])]),_:1})):y("",!0),t.editKeys.includes("password")?(f(),v(c,{key:4,prop:"oldPassword"},{default:d(()=>[r(u,{modelValue:s.password,"onUpdate:modelValue":o[4]||(o[4]=i=>s.password=i),type:"oldPassword",placeholder:"Old Password"},null,8,["modelValue"])]),_:1})):y("",!0),t.editKeys.includes("password")?(f(),v(c,{key:5,prop:"password"},{default:d(()=>[r(u,{modelValue:s.password,"onUpdate:modelValue":o[5]||(o[5]=i=>s.password=i),type:"password",placeholder:"New Password"},null,8,["modelValue"])]),_:1})):y("",!0)]),_:1},8,["model","rules"])]),_:1},8,["modelValue","class","title"])}}}),oe={class:"setting"},te=e("h1",null,"Profile Settings",-1),ie={class:"user-info_container"},le=e("div",{class:"user-avatar"},[e("img",{src:A,alt:""})],-1),ne={class:"user-info"},ae={class:"user-info_item"},de={class:"info-label"},re=e("span",null,"Nickname",-1),ue={class:"info-value"},ce={class:"user-info_item"},me={class:"info-label"},pe=e("span",null,"Gender",-1),_e={class:"info-value"},fe={class:"user-info_item"},ve={class:"info-label"},ge=e("span",null,"Email",-1),be={class:"info-value"},ye={class:"user-info_item"},he={class:"info-label"},we=e("span",null,"Password",-1),ke=e("div",{class:"info-value"},"******",-1),Ve={class:"user-info_item"},Ne={class:"info-label"},Pe=e("span",null,"Phone Number",-1),Ee={class:"info-value"},Ie=e("div",{class:"delete-account_container"},[e("div",{class:"title"},"Danger Zone"),e("div",{class:"desc"},"if you want to permanently delete this account and all of its data."),e("div",{class:"delete-icon"},"Delete Account")],-1),Ce={class:"sub-plan_container"},Ke={class:"plan-title"},Ue={class:"current-plan"},$e=e("div",{class:"label"},"Current Plan",-1),De={class:"value"},qe={class:"sub-info"},Ae={class:"sub-info_item"},Be=e("div",{class:"info-label"},"Payment Date:",-1),Fe={class:"info-value"},Se={class:"sub-info_item"},Me=e("div",{class:"info-label"},"Subscription to:",-1),Re={class:"info-value"},Je=K({__name:"user-setting",setup(C){const a=E({});W(()=>{V()});const V=async()=>{a.value=await F()},l=I({visible:!1,userInfo:{},editKeys:[],title:""}),p=(n,s)=>{l.visible=!0,l.userInfo=a.value,l.editKeys=[n],l.title=s},_=n=>n===0?"":typeof n=="string"?n:new Date(n).toLocaleDateString();return(n,s)=>{var N,h,w,t,o,u,c;return f(),X("div",oe,[te,e("div",ie,[le,e("div",ne,[e("div",ae,[e("div",de,[re,e("img",{class:"edit-icon",src:k,onClick:s[0]||(s[0]=m=>p("nickName","Edit NickName"))})]),e("div",ue,g((N=a.value)==null?void 0:N.nickName),1)]),e("div",ce,[e("div",me,[pe,e("img",{class:"edit-icon",src:k,onClick:s[1]||(s[1]=m=>p("gender","Edit Gender"))})]),e("div",_e,g(b(Y).func((h=a.value)==null?void 0:h.gender)),1)]),e("div",fe,[e("div",ve,[ge,e("img",{class:"edit-icon",src:k,onClick:s[2]||(s[2]=m=>p("account","Edit Email"))})]),e("div",be,g((w=a.value)==null?void 0:w.account),1)]),e("div",ye,[e("div",he,[we,e("img",{class:"edit-icon",src:k,onClick:s[3]||(s[3]=m=>p("password","Edit Password"))})]),ke]),e("div",Ve,[e("div",Ne,[Pe,e("img",{class:"edit-icon",src:k,onClick:s[4]||(s[4]=m=>p("phone","Edit Phone Number"))})]),e("div",Ee,g((t=a.value)==null?void 0:t.phone),1)])]),Ie]),e("div",Ce,[e("div",Ke,[e("div",Ue,[$e,e("div",De,g((o=a.value.subInfo)==null?void 0:o.subName),1)])]),e("div",qe,[e("div",Ae,[Be,e("div",Fe,g(_((u=a.value.subInfo)==null?void 0:u.paymentAt)),1)]),e("div",Se,[Me,e("div",Re,g(_((c=a.value.subInfo)==null?void 0:c.endAt)),1)])])]),r(se,{visible:b(l).visible,"onUpdate:visible":s[5]||(s[5]=m=>b(l).visible=m),"user-info":b(l).userInfo,"edit-keys":b(l).editKeys,title:b(l).title,onRefresh:V},null,8,["visible","user-info","edit-keys","title"])])}}});export{Je as default};
